<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Register</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container d-flex justify-content-center">
      <div class="w-50">
        <h3 class="text-center mt-5">REGISTER</h3>
        <form action="http://localhost:3000/register" enctype="multipart/form-data" method="post">
          <div class="mb-3">
            <label for="username" class="form-label">Name</label>
            <input
              type="text"
              name="user_name"
              class="form-control"
              id="username"
              aria-describedby="emailHelp"
            />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              name="user_email"
              class="form-control"
              id="email"
              aria-describedby="emailHelp"
            />
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              class="form-control"
              name="user_password"
              id="password"
            />
          </div>
          <div class="mb-3">
            <label for="image" class="form-label"
              >Default file input example</label
            >
            <input class="form-control" type="file" name="user_image" id="image" />
          </div>
          <button
            type="submit"
            class="btn btn-outline-dark"
            onclick="regForm(event)"
          >
            Submit
          </button>
        </form>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      function regForm(event) {
        const form = document.querySelector('form')
        form.addEventListener('submit') ,(e) =>{
          event.preventDefault();
          const fd = new FormData(form)
          const urlEncoded = new URLSearchParams(fd).toString()
          fetch("http://localhost:3000/register", {
          method: "POST",
          body: urlEncoded,
          headers: {
            'Content-type' : 'application/x-www-form-urlencoded',
          }
        })
        }
        // const nameInput = document.getElementById("username").value;
        // const emailInput = document.getElementById("email").value;
        // const passwordInput = document.getElementById("password").value;
        // const imageInput = document.getElementById("image").value;
        // if (!nameInput || !emailInput || !passwordInput) {  
        //   alert("mohon diisi datanya!");
        //   return;
        // }
        // fetch("http://localhost:3000/register", {
        //   method: "POST",
        //   headers: {
        //     "Content-Type": "application/json",
        //   },
        //   body: JSON.stringify({
        //     user_name: nameInput,
        //     user_email: emailInput,
        //     user_password: passwordInput,
        //     user_image: imageInput
        //   }),
        // })
        //   .then((response) => response.json())
        //   .then((json) => console.log(json));
        window.location.href = "login.html";
      }
    </script>
  </body>
</html>
